---
import CodeBlock from "@/components/ui/CodeBlock.astro";

interface Props {
  name: string;
  download_url?: string;
  sha512?: string;
  quick_start?: string;
}

const { name, download_url, sha512, quick_start } = Astro.props;

const installCommand = download_url
  ? `pvesh create /nodes/\${NODE}/lxc \\
  -vmid \${VMID} \\
  -hostname ${name} \\
  -ostemplate local:vztmpl/${name}.tar.zst \\
  -storage local-lvm \\
  -rootfs local-lvm:8 \\
  -memory 512 \\
  -cores 1 \\
  -net0 name=eth0,bridge=vmbr0,ip=dhcp \\
  -unprivileged 1 \\
  -features nesting=1 \\
  -start 1`
  : "# Template not yet released";
---

<div class="card bg-base-100">
  <div class="card-body p-0">
    <div class="px-4 py-3 border-b border-base-300 bg-base-200">
      <h2 class="card-title text-base">
        <svg class="w-4 h-4 text-primary" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
        </svg>
        Installation
      </h2>
    </div>

    <div class="p-4 space-y-4">
      {download_url && (
        <div class="alert alert-info">
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
          </svg>
          <span>In Proxmox UI: <strong>Datacenter → Storage → CT Templates → Download from URL</strong></span>
        </div>
      )}

      {download_url && (
        <div>
          <label class="label">
            <span class="label-text">Download URL</span>
          </label>
          <CodeBlock code={download_url} showCopy={true} />
        </div>
      )}

      {sha512 && (
        <div>
          <label class="label">
            <span class="label-text">SHA512 Checksum</span>
          </label>
          <CodeBlock code={sha512} showCopy={true} />
        </div>
      )}

      <div>
        <label class="label">
          <span class="label-text">Create Container</span>
        </label>
        <CodeBlock code={installCommand} showCopy={true} />
      </div>

      {quick_start && (
        <div class="alert alert-success">
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
          </svg>
          <div>
            <div class="font-bold">Quick Start</div>
            <div class="text-sm whitespace-pre-wrap">{quick_start}</div>
          </div>
        </div>
      )}
    </div>
  </div>
</div>
