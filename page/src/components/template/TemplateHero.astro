---
interface Props {
  name: string;
  description: string;
  category: string;
  icon: string;
  version: string;
  build_version: number;
  base_os: string;
  architecture: string;
}

const {
  name,
  description,
  category,
  icon,
  version,
  build_version,
  base_os,
  architecture,
} = Astro.props;

const iconUrl = `https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons@main/svg/${icon}.svg`;
const displayName = name.charAt(0).toUpperCase() + name.slice(1);

const categoryBadge: Record<string, string> = {
  media: "badge-error",
  network: "badge-info",
  database: "badge-warning",
  automation: "badge-secondary",
  monitoring: "badge-success",
  storage: "badge-accent",
  security: "badge-primary",
  development: "badge-neutral",
};
---

<div class="flex flex-col md:flex-row items-start gap-6 mb-8">
  <!-- Icon -->
  <div class="avatar placeholder">
    <div class="bg-base-300 rounded-2xl w-24 p-4">
      <img
        src={iconUrl}
        alt={`${displayName} icon`}
        loading="eager"
        class="w-full h-full"
        onerror="this.style.display='none';this.nextElementSibling.style.display='block'"
      />
      <svg class="w-full h-full opacity-50" style="display:none" viewBox="0 0 24 24" fill="currentColor">
        <path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-1 12H5c-.55 0-1-.45-1-1V9c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v8c0 .55-.45 1-1 1z"/>
      </svg>
    </div>
  </div>

  <!-- Content -->
  <div class="flex-1">
    <div class="flex flex-wrap items-center gap-3 mb-3">
      <h1 class="text-3xl font-bold">{displayName}</h1>
      <span class="badge badge-ghost">v{version}-{build_version}</span>
      <span class={`badge ${categoryBadge[category] || 'badge-neutral'}`}>
        {category.charAt(0).toUpperCase() + category.slice(1)}
      </span>
    </div>

    <p class="text-lg opacity-70 mb-4 max-w-2xl">{description}</p>

    <div class="flex flex-wrap items-center gap-4 text-sm opacity-60">
      <span class="flex items-center gap-1.5">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M20 18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z"/>
        </svg>
        {base_os}
      </span>
      <span class="flex items-center gap-1.5">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15 9H9v6h6V9zm-2 4h-2v-2h2v2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2zm-4 6H7V7h10v10z"/>
        </svg>
        {architecture}
      </span>
      <span class="flex items-center gap-1.5">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
        </svg>
        Proxmox VE 9.x
      </span>
    </div>
  </div>
</div>
