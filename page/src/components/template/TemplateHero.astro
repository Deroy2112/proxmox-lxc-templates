---
import Badge from "@/components/ui/Badge.astro";

interface Props {
  name: string;
  description: string;
  category: string;
  icon: string;
  version: string;
  build_version: number;
  base_os: string;
  architecture: string;
}

const {
  name,
  description,
  category,
  icon,
  version,
  build_version,
  base_os,
  architecture,
} = Astro.props;

const iconUrl = `https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons@main/svg/${icon}.svg`;
const displayName = name.charAt(0).toUpperCase() + name.slice(1);
---

<div class="flex flex-col md:flex-row items-start gap-6 mb-8">
  <!-- Icon -->
  <div class="icon-box icon-box-xl shrink-0" style={`--icon-color: var(--color-cat-${category})`}>
    <img
      src={iconUrl}
      alt={`${displayName} icon`}
      loading="eager"
      onerror="this.style.display='none'"
    />
  </div>

  <!-- Content -->
  <div class="flex-1">
    <div class="flex flex-wrap items-center gap-3 mb-3">
      <h1 class="text-3xl font-bold text-[var(--text-primary)]">
        {displayName}
      </h1>
      <Badge variant="default" size="md">v{version}-{build_version}</Badge>
      <Badge variant="category" category={category as any} size="sm">
        {category.charAt(0).toUpperCase() + category.slice(1)}
      </Badge>
    </div>

    <p class="text-lg text-[var(--text-secondary)] mb-4 max-w-2xl">
      {description}
    </p>

    <div class="flex flex-wrap items-center gap-4 text-sm text-[var(--text-muted)]">
      <span class="flex items-center gap-1.5">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M20 18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z"/>
        </svg>
        {base_os}
      </span>
      <span class="flex items-center gap-1.5">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15 9H9v6h6V9zm-2 4h-2v-2h2v2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2zm-4 6H7V7h10v10z"/>
        </svg>
        {architecture}
      </span>
      <span class="flex items-center gap-1.5">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
        </svg>
        Proxmox VE 9.x
      </span>
    </div>
  </div>
</div>
