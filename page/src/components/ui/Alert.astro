---
interface Props {
  type?: "info" | "warning" | "success" | "error";
  title?: string;
  size?: "sm" | "md";
  class?: string;
}

const { type = "info", title, size = "md", class: className = "" } = Astro.props;

const typeConfig = {
  info: {
    bg: "bg-blue-500/10",
    border: "border-blue-500/20",
    icon: "text-blue-500",
    iconPath: "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z",
  },
  warning: {
    bg: "bg-amber-500/10",
    border: "border-amber-500/20",
    icon: "text-amber-500",
    iconPath: "M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z",
  },
  success: {
    bg: "bg-green-500/10",
    border: "border-green-500/20",
    icon: "text-green-500",
    iconPath: "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",
  },
  error: {
    bg: "bg-red-500/10",
    border: "border-red-500/20",
    icon: "text-red-500",
    iconPath: "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z",
  },
};

const config = typeConfig[type];
const sizeClasses = size === "sm" ? "p-3 text-sm" : "p-4";

const classes = `
  flex gap-3 rounded-lg border
  ${config.bg} ${config.border}
  ${sizeClasses}
  ${className}
`.trim();
---

<div class={classes} role="alert">
  <svg
    class={`shrink-0 w-5 h-5 ${config.icon}`}
    viewBox="0 0 24 24"
    fill="currentColor"
  >
    <path d={config.iconPath} />
  </svg>
  <div class="flex-1">
    {title && (
      <p class="font-semibold text-[var(--text-primary)] mb-1">{title}</p>
    )}
    <div class="text-[var(--text-secondary)]">
      <slot />
    </div>
  </div>
</div>
