const P=new Map;function s(e,o){const y=document.createElement(e);return o?.className&&(y.className=o.className),o?.textContent&&(y.textContent=o.textContent),y}function L(e,...o){e.replaceChildren(...o)}function T(e){return document.createTextNode(e)}function Q(e){const o=/^## \[[\d.]+-?\d*\]/m,y=e.split(`
`),g=[];let m=!1;for(const f of y){if(o.test(f)){if(m)break;m=!0}m&&g.push(f)}return g.join(`
`).trim()||e}function G(e){R(e),document.getElementById("template-list")?.classList.add("hidden"),document.getElementById("template-detail")?.classList.remove("hidden");const o=new URL(location.href);o.searchParams.set("template",e.name),o.searchParams.delete("q"),o.searchParams.delete("category"),history.pushState({template:e.name},"",o),window.scrollTo({top:0,behavior:"smooth"})}function $(){document.getElementById("template-detail")?.classList.add("hidden"),document.getElementById("template-list")?.classList.remove("hidden");const e=new URL(location.href);e.searchParams.delete("template"),history.pushState({},"",e)}function R(e){const o=`https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons@main/svg/${e.icon}.svg`,y=e.name.charAt(0).toUpperCase()+e.name.slice(1),g=document.getElementById("detail-icon");g&&(g.src=o);const m=document.getElementById("detail-name");m&&(m.textContent=y);const f=document.getElementById("detail-description");f&&(f.textContent=e.description);const B=document.getElementById("detail-badges");if(B){const n=s("span",{className:"badge badge-success",textContent:`v${e.version}-${e.build_version}`}),r=s("span",{className:"tag",textContent:e.base_os}),a=s("span",{className:"badge badge-info",textContent:e.category});L(B,n,r,a)}const u=document.getElementById("detail-download-section"),p=document.getElementById("detail-wget"),C=document.getElementById("detail-sha512");if(e.download_url){u?.classList.remove("hidden"),p&&(p.value=`wget ${e.download_url}`);const n=document.getElementById("detail-sha512-wrapper");C&&n&&(e.sha512?(C.value=`SHA512: ${e.sha512}`,C.setAttribute("data-sha512",e.sha512),n.classList.remove("hidden")):(C.value="",n.classList.add("hidden")))}else u?.classList.add("hidden");const v=document.getElementById("detail-quickstart-section"),d=document.getElementById("detail-quickstart");if(e.quick_start&&v&&d){v.classList.remove("hidden");const n=s("pre"),r=s("code",{textContent:e.quick_start});n.appendChild(r),L(d,n)}else v?.classList.add("hidden");const i=document.getElementById("detail-resources"),c=e.resources;if(i&&c){const n=c.memory_recommended,r=c.memory_min,a=h=>h>=1024?`${h/1024}GB`:`${h}MB`,E=(h,w,N)=>{const _=s("div",{className:"stat"});return _.appendChild(s("div",{className:"stat-value",textContent:h})),_.appendChild(s("div",{className:"stat-label",textContent:w})),N&&_.appendChild(s("div",{className:"stat-desc",textContent:N})),_};L(i,E(a(n),"Memory",`min: ${a(r)}`),E(c.disk_recommended,"Disk",`min: ${c.disk_min}`),E(String(c.cores),c.cores===1?"Core":"Cores"))}const b=document.getElementById("detail-ports-section"),k=document.getElementById("detail-ports"),t=e.ports;if(t?.length&&b&&k){b.classList.remove("hidden");const n=t.map(r=>{const a=s("tr");return a.appendChild(s("td",{className:"font-mono",textContent:String(r.port)})),a.appendChild(s("td",{textContent:r.description})),a});L(k,...n)}else b?.classList.add("hidden");const l=document.getElementById("detail-paths-section"),I=document.getElementById("detail-paths"),q=e.paths;if(q?.length&&l&&I){l.classList.remove("hidden");const n=q.map(r=>{const a=s("tr");return a.appendChild(s("td",{className:"font-mono text-xs",textContent:r.path})),a.appendChild(s("td",{textContent:r.description})),a});L(I,...n)}else l?.classList.add("hidden");const A=document.getElementById("detail-credentials-section"),D=document.getElementById("detail-credentials"),S=e.credentials;if(S&&A&&D){A.classList.remove("hidden");const n=document.createDocumentFragment();n.appendChild(T("User: ")),n.appendChild(s("code",{textContent:S.username})),n.appendChild(T(" / Pass: ")),n.appendChild(s("code",{textContent:S.password})),S.note&&(n.appendChild(s("br")),n.appendChild(s("span",{className:"text-muted",textContent:S.note}))),L(D,n)}else A?.classList.add("hidden");const x=document.getElementById("detail-faq-section"),M=document.getElementById("detail-faq"),F=e.faq;if(F?.length&&x&&M){x.classList.remove("hidden");const n=()=>{const a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","0 0 256 256"),a.setAttribute("fill","currentColor");const E=document.createElementNS("http://www.w3.org/2000/svg","path");return E.setAttribute("d","M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"),a.appendChild(E),a},r=F.map((a,E)=>{const h=s("div",{className:`accordion-item${E===0?" open":""}`}),w=s("button",{className:"accordion-header"});w.appendChild(T(a.question)),w.appendChild(n()),w.addEventListener("click",()=>h.classList.toggle("open"));const N=s("div",{className:"accordion-content"});return N.appendChild(s("p",{textContent:a.answer})),h.appendChild(w),h.appendChild(N),h});L(M,...r)}else x?.classList.add("hidden");const U=document.getElementById("detail-changelog-section"),K=document.getElementById("detail-changelog"),V=document.getElementById("changelog-item");if(e.changelog&&U&&K&&V){U.classList.remove("hidden"),V.classList.remove("open");const n=e.changelog,r=Q(n),a=s("p"),E=r.split(`
`);E.forEach((h,w)=>{a.appendChild(T(h)),w<E.length-1&&a.appendChild(s("br"))}),L(K,a)}else U?.classList.add("hidden");const j=document.getElementById("detail-release-section"),H=document.getElementById("detail-release-date"),J=document.getElementById("detail-github-link");e.release_url||e.release_date?(j?.classList.remove("hidden"),e.release_date&&H&&(H.textContent=`Released: ${new Date(e.release_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}`),e.release_url&&J&&(J.href=e.release_url)):j?.classList.add("hidden")}function W(){const e=document.getElementById("search-input"),o=document.getElementById("template-grid"),y=document.getElementById("no-results"),g=o?.querySelectorAll(".app-card"),m=document.querySelectorAll("#category-pills .pill"),f=document.querySelectorAll(".sidebar-nav button[data-category]"),B=document.getElementById("visible-count");if(!o||!g)return;let u="all",p="";P.clear(),g.forEach(t=>{const l=t.getAttribute("data-template");if(l)try{const I=JSON.parse(l);P.set(I.name,I)}catch{}});const C=new URLSearchParams(window.location.search),v=C.get("q")||"",d=C.get("category")||"all";v&&e&&(e.value=v,p=v.toLowerCase()),u=d;function i(){m.forEach(t=>{const l=t.getAttribute("data-category");t.classList.toggle("active",l===u)}),f.forEach(t=>{const l=t.getAttribute("data-category");t.classList.toggle("active",l===u)})}function c(){let t=0;g.forEach(l=>{const I=l.getAttribute("data-name")||"",q=l.getAttribute("data-description")||"",A=l.getAttribute("data-category")||"",x=(!p||I.includes(p)||q.includes(p))&&(u==="all"||A===u);l.style.display=x?"":"none",x&&t++}),B&&(B.textContent=String(t)),y?.classList.toggle("hidden",t>0),o?.classList.toggle("hidden",t===0&&g.length>0)}let b;e?.addEventListener("input",()=>{clearTimeout(b),b=setTimeout(()=>{p=e.value.toLowerCase(),document.getElementById("template-detail")?.classList.contains("hidden")||$(),c();const t=new URL(window.location.href);p?t.searchParams.set("q",e.value):t.searchParams.delete("q"),history.replaceState(null,"",t.toString())},150)});function k(t){u=t,document.getElementById("template-detail")?.classList.contains("hidden")||$(),i(),c();const l=new URL(window.location.href);u!=="all"?l.searchParams.set("category",u):l.searchParams.delete("category"),history.replaceState(null,"",l.toString())}m.forEach(t=>{t.addEventListener("click",()=>{k(t.getAttribute("data-category")||"all")})}),f.forEach(t=>{t.addEventListener("click",()=>{k(t.getAttribute("data-category")||"all"),document.querySelector(".sidebar")?.classList.remove("open"),document.getElementById("sidebar-overlay")?.classList.remove("open")})}),i(),c()}function Z(){const o=document.getElementById("template-grid")?.querySelectorAll(".app-card"),y=document.getElementById("back-to-list"),g=document.getElementById("detail-wget-copy"),m=document.getElementById("detail-wget"),f=document.getElementById("detail-sha512-copy");g?.addEventListener("click",async()=>{if(m?.value)try{await navigator.clipboard.writeText(m.value),window.showToast?.("Copied to clipboard!")}catch{m.select(),document.execCommand("copy"),window.showToast?.("Copied!")}}),f?.addEventListener("click",async()=>{const i=document.getElementById("detail-sha512")?.getAttribute("data-sha512");if(i)try{await navigator.clipboard.writeText(i),window.showToast?.("SHA512 copied to clipboard!")}catch{window.showToast?.("Failed to copy")}});const B=document.getElementById("changelog-toggle"),u=document.getElementById("changelog-item");B?.addEventListener("click",()=>{u?.classList.toggle("open")});function p(d){const i=d.getAttribute("data-template");if(i)try{const c=JSON.parse(i);G(c)}catch{}}o?.forEach(d=>{d.addEventListener("click",()=>p(d)),d.addEventListener("keydown",i=>{const c=i;(c.key==="Enter"||c.key===" ")&&(i.preventDefault(),p(d))})}),y?.addEventListener("click",$),window.addEventListener("popstate",d=>{const i=d.state;if(i?.template){const c=P.get(i.template);c&&(R(c),document.getElementById("template-list")?.classList.add("hidden"),document.getElementById("template-detail")?.classList.remove("hidden"))}else document.getElementById("template-detail")?.classList.add("hidden"),document.getElementById("template-list")?.classList.remove("hidden")});const v=new URLSearchParams(location.search).get("template");if(v){const d=P.get(v);d&&(R(d),document.getElementById("template-list")?.classList.add("hidden"),document.getElementById("template-detail")?.classList.remove("hidden"))}}function z(){document.addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),document.getElementById("search-input")?.focus())})}function O(){W(),Z(),z()}O();document.addEventListener("astro:after-swap",O);
