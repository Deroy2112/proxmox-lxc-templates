const U=new Map;function t(e,c){const y=document.createElement(e);return c?.className&&(y.className=c.className),c?.textContent&&(y.textContent=c.textContent),y}function w(e,...c){e.replaceChildren(...c)}function D(e){return document.createTextNode(e)}function z(e){const c=/^## \[[\d.]+-?\d*\]/m,y=e.split(`
`),g=[];let u=!1;for(const C of y){if(c.test(C)){if(u)break;u=!0}u&&g.push(C)}return g.join(`
`).trim()||e}function X(e){F(e),document.getElementById("template-list")?.classList.add("hidden"),document.getElementById("template-detail")?.classList.remove("hidden");const c=new URL(location.href);c.searchParams.set("template",e.name),c.searchParams.delete("q"),c.searchParams.delete("category"),history.pushState({template:e.name},"",c),window.scrollTo({top:0,behavior:"smooth"})}function j(){document.getElementById("template-detail")?.classList.add("hidden"),document.getElementById("template-list")?.classList.remove("hidden");const e=new URL(location.href);e.searchParams.delete("template"),history.pushState({},"",e)}function F(e){const c=`https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons@main/svg/${e.icon}.svg`,y=e.name.charAt(0).toUpperCase()+e.name.slice(1),g=document.getElementById("detail-icon");g&&(g.src=c);const u=document.getElementById("detail-name");u&&(u.textContent=y);const C=document.getElementById("detail-description");C&&(C.textContent=e.description);const b=document.getElementById("detail-badges");if(b){const n=t("span",{className:"badge badge-success",textContent:`v${e.version}-${e.build_version}`}),a=t("span",{className:"tag",textContent:e.base_os}),o=t("span",{className:"badge badge-info",textContent:e.category});w(b,n,a,o)}const r=document.getElementById("detail-project-url");r&&(e.project_url?(r.href=e.project_url,r.classList.remove("hidden")):r.classList.add("hidden"));const p=document.getElementById("detail-download-section"),S=document.getElementById("detail-wget"),f=document.getElementById("detail-sha512");if(e.download_url){p?.classList.remove("hidden"),S&&(S.value=`wget ${e.download_url}`);const n=document.getElementById("detail-sha512-wrapper");f&&n&&(e.sha512?(f.value=`SHA512: ${e.sha512}`,f.setAttribute("data-sha512",e.sha512),n.classList.remove("hidden")):(f.value="",n.classList.add("hidden")))}else p?.classList.add("hidden");const d=document.getElementById("detail-quickstart-section"),i=document.getElementById("detail-quickstart");if(e.quick_start&&d&&i){d.classList.remove("hidden");const n=t("pre"),a=t("code",{textContent:e.quick_start});n.appendChild(a),w(i,n)}else d?.classList.add("hidden");const m=document.getElementById("detail-resources"),v=e.resources;if(m&&v){const n=v.memory_recommended,a=v.memory_min,o=h=>h>=1024?`${h/1024}GB`:`${h}MB`,E=(h,I,N)=>{const T=t("div",{className:"stat"});return T.appendChild(t("div",{className:"stat-value",textContent:h})),T.appendChild(t("div",{className:"stat-label",textContent:I})),N&&T.appendChild(t("div",{className:"stat-desc",textContent:N})),T};w(m,E(o(n),"Memory",`min: ${o(a)}`),E(v.disk_recommended,"Disk",`min: ${v.disk_min}`),E(String(v.cores),v.cores===1?"Core":"Cores"))}const x=document.getElementById("detail-ports-section"),s=document.getElementById("detail-ports"),l=e.ports;if(l?.length&&x&&s){x.classList.remove("hidden");const n=l.map(a=>{const o=t("tr");return o.appendChild(t("td",{className:"font-mono",textContent:String(a.port)})),o.appendChild(t("td",{textContent:a.description})),o});w(s,...n)}else x?.classList.add("hidden");const B=document.getElementById("detail-paths-section"),A=document.getElementById("detail-paths"),q=e.paths;if(q?.length&&B&&A){B.classList.remove("hidden");const n=q.map(a=>{const o=t("tr");return o.appendChild(t("td",{className:"font-mono text-xs",textContent:a.path})),o.appendChild(t("td",{textContent:a.description})),o});w(A,...n)}else B?.classList.add("hidden");const _=document.getElementById("detail-user-section"),P=document.getElementById("detail-user"),L=e.user;if(L&&(L.uid||L.gid)&&_&&P){_.classList.remove("hidden");const n=[];if(L.uid){const a=t("tr");a.appendChild(t("td",{textContent:"UID"})),a.appendChild(t("td",{className:"font-mono",textContent:String(L.uid)})),n.push(a)}if(L.gid){const a=t("tr");a.appendChild(t("td",{textContent:"GID"})),a.appendChild(t("td",{className:"font-mono",textContent:String(L.gid)})),n.push(a)}w(P,...n)}else _?.classList.add("hidden");const $=document.getElementById("detail-credentials-section"),K=document.getElementById("detail-credentials"),k=e.credentials;if(k&&$&&K){$.classList.remove("hidden");const n=document.createDocumentFragment();n.appendChild(D("User: ")),n.appendChild(t("code",{textContent:k.username})),n.appendChild(D(" / Pass: ")),n.appendChild(t("code",{textContent:k.password})),k.note&&(n.appendChild(t("br")),n.appendChild(t("span",{className:"text-muted",textContent:k.note}))),w(K,n)}else $?.classList.add("hidden");const R=document.getElementById("detail-faq-section"),V=document.getElementById("detail-faq"),G=e.faq;if(G?.length&&R&&V){R.classList.remove("hidden");const n=()=>{const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("viewBox","0 0 256 256"),o.setAttribute("fill","currentColor");const E=document.createElementNS("http://www.w3.org/2000/svg","path");return E.setAttribute("d","M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"),o.appendChild(E),o},a=G.map((o,E)=>{const h=t("div",{className:`accordion-item${E===0?" open":""}`}),I=t("button",{className:"accordion-header"});I.appendChild(D(o.question)),I.appendChild(n()),I.addEventListener("click",()=>h.classList.toggle("open"));const N=t("div",{className:"accordion-content"});return N.appendChild(t("p",{textContent:o.answer})),h.appendChild(I),h.appendChild(N),h});w(V,...a)}else R?.classList.add("hidden");const M=document.getElementById("detail-changelog-section"),H=document.getElementById("detail-changelog"),J=document.getElementById("changelog-item");if(e.changelog&&M&&H&&J){M.classList.remove("hidden"),J.classList.remove("open");const n=e.changelog,a=z(n),o=t("p"),E=a.split(`
`);E.forEach((h,I)=>{o.appendChild(D(h)),I<E.length-1&&o.appendChild(t("br"))}),w(H,o)}else M?.classList.add("hidden");const O=document.getElementById("detail-release-section"),Q=document.getElementById("detail-release-date"),W=document.getElementById("detail-github-link");e.release_url||e.release_date?(O?.classList.remove("hidden"),e.release_date&&Q&&(Q.textContent=`Released: ${new Date(e.release_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}`),e.release_url&&W&&(W.href=e.release_url)):O?.classList.add("hidden")}function Y(){const e=document.getElementById("search-input"),c=document.getElementById("template-grid"),y=document.getElementById("no-results"),g=c?.querySelectorAll(".app-card"),u=document.querySelectorAll("#category-pills .pill"),C=document.querySelectorAll(".sidebar-nav button[data-category]"),b=document.getElementById("visible-count");if(!c||!g)return;let r="all",p="";U.clear(),g.forEach(s=>{const l=s.getAttribute("data-template");if(l)try{const B=JSON.parse(l);U.set(B.name,B)}catch{}});const S=new URLSearchParams(window.location.search),f=S.get("q")||"",d=S.get("category")||"all";f&&e&&(e.value=f,p=f.toLowerCase()),r=d;function i(){u.forEach(s=>{const l=s.getAttribute("data-category");s.classList.toggle("active",l===r)}),C.forEach(s=>{const l=s.getAttribute("data-category");s.classList.toggle("active",l===r)})}function m(){let s=0;g.forEach(l=>{const B=l.getAttribute("data-name")||"",A=l.getAttribute("data-description")||"",q=l.getAttribute("data-category")||"",L=(!p||B.includes(p)||A.includes(p))&&(r==="all"||q===r);l.style.display=L?"":"none",L&&s++}),b&&(b.textContent=String(s)),y?.classList.toggle("hidden",s>0),c?.classList.toggle("hidden",s===0&&g.length>0)}let v;e?.addEventListener("input",()=>{clearTimeout(v),v=setTimeout(()=>{p=e.value.toLowerCase(),document.getElementById("template-detail")?.classList.contains("hidden")||j(),m();const s=new URL(window.location.href);p?s.searchParams.set("q",e.value):s.searchParams.delete("q"),history.replaceState(null,"",s.toString())},150)});function x(s){r=s,document.getElementById("template-detail")?.classList.contains("hidden")||j(),i(),m();const l=new URL(window.location.href);r!=="all"?l.searchParams.set("category",r):l.searchParams.delete("category"),history.replaceState(null,"",l.toString())}u.forEach(s=>{s.addEventListener("click",()=>{x(s.getAttribute("data-category")||"all")})}),C.forEach(s=>{s.addEventListener("click",()=>{x(s.getAttribute("data-category")||"all"),document.querySelector(".sidebar")?.classList.remove("open"),document.getElementById("sidebar-overlay")?.classList.remove("open")})}),i(),m()}function ee(){const c=document.getElementById("template-grid")?.querySelectorAll(".app-card"),y=document.getElementById("back-to-list"),g=document.getElementById("detail-wget-copy"),u=document.getElementById("detail-wget"),C=document.getElementById("detail-sha512-copy");g?.addEventListener("click",async()=>{if(u?.value)try{await navigator.clipboard.writeText(u.value),window.showToast?.("Copied to clipboard!")}catch{u.select(),document.execCommand("copy"),window.showToast?.("Copied!")}}),C?.addEventListener("click",async()=>{const i=document.getElementById("detail-sha512")?.getAttribute("data-sha512");if(i)try{await navigator.clipboard.writeText(i),window.showToast?.("SHA512 copied to clipboard!")}catch{window.showToast?.("Failed to copy")}});const b=document.getElementById("changelog-toggle"),r=document.getElementById("changelog-item");b?.addEventListener("click",()=>{r?.classList.toggle("open")});function p(d){const i=d.getAttribute("data-template");if(i)try{const m=JSON.parse(i);X(m)}catch{}}c?.forEach(d=>{d.addEventListener("click",()=>p(d)),d.addEventListener("keydown",i=>{const m=i;(m.key==="Enter"||m.key===" ")&&(i.preventDefault(),p(d))})}),y?.addEventListener("click",j),window.addEventListener("popstate",d=>{const i=d.state;if(i?.template){const m=U.get(i.template);m&&(F(m),document.getElementById("template-list")?.classList.add("hidden"),document.getElementById("template-detail")?.classList.remove("hidden"))}else document.getElementById("template-detail")?.classList.add("hidden"),document.getElementById("template-list")?.classList.remove("hidden")});const f=new URLSearchParams(location.search).get("template");if(f){const d=U.get(f);d&&(F(d),document.getElementById("template-list")?.classList.add("hidden"),document.getElementById("template-detail")?.classList.remove("hidden"))}}function te(){document.addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),document.getElementById("search-input")?.focus())})}function Z(){Y(),ee(),te()}Z();document.addEventListener("astro:after-swap",Z);
