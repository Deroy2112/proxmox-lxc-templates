const P=new Map;function t(e,c){const h=document.createElement(e);return c?.className&&(h.className=c.className),c?.textContent&&(h.textContent=c.textContent),h}function L(e,...c){e.replaceChildren(...c)}function D(e){return document.createTextNode(e)}function X(e){const c=/^## \[[\d.]+-?\d*\]/m,h=e.split(`
`),y=[];let r=!1;for(const E of h){if(c.test(E)){if(r)break;r=!0}r&&y.push(E)}return y.join(`
`).trim()||e}function Y(e){K(e),document.getElementById("template-list")?.classList.add("hidden"),document.getElementById("template-detail")?.classList.remove("hidden");const c=new URL(location.href);c.searchParams.set("template",e.name),c.searchParams.delete("q"),c.searchParams.delete("category"),history.pushState({template:e.name},"",c),window.scrollTo({top:0,behavior:"smooth"})}function F(){document.getElementById("template-detail")?.classList.add("hidden"),document.getElementById("template-list")?.classList.remove("hidden");const e=new URL(location.href);e.searchParams.delete("template"),history.pushState({},"",e)}function K(e){const c=`https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons@main/svg/${e.icon}.svg`,h=`https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons@main/png/${e.icon}.png`,y=e.name.charAt(0).toUpperCase()+e.name.slice(1),r=document.getElementById("detail-icon");r&&(r.src=c,r.onerror=()=>{r.onerror=null,r.src=h});const E=document.getElementById("detail-name");E&&(E.textContent=y);const B=document.getElementById("detail-description");B&&(B.textContent=e.description);const g=document.getElementById("detail-badges");if(g){const n=t("span",{className:"badge badge-success",textContent:`v${e.version}-${e.build_version}`}),a=t("span",{className:"tag",textContent:e.base_os}),o=t("span",{className:"badge badge-info",textContent:e.category});L(g,n,a,o)}const m=document.getElementById("detail-project-url");m&&(e.project_url?(m.href=e.project_url,m.classList.remove("hidden")):m.classList.add("hidden"));const S=document.getElementById("detail-download-section"),v=document.getElementById("detail-wget"),d=document.getElementById("detail-sha512");if(e.download_url){S?.classList.remove("hidden"),v&&(v.value=`wget ${e.download_url}`);const n=document.getElementById("detail-sha512-wrapper");d&&n&&(e.sha512?(d.value=`SHA512: ${e.sha512}`,d.setAttribute("data-sha512",e.sha512),n.classList.remove("hidden")):(d.value="",n.classList.add("hidden")))}else S?.classList.add("hidden");const l=document.getElementById("detail-quickstart-section"),u=document.getElementById("detail-quickstart");if(e.quick_start&&l&&u){l.classList.remove("hidden");const n=t("pre"),a=t("code",{textContent:e.quick_start});n.appendChild(a),L(u,n)}else l?.classList.add("hidden");const x=document.getElementById("detail-resources"),C=e.resources;if(x&&C){const n=C.memory_recommended,a=C.memory_min,o=p=>p>=1024?`${p/1024}GB`:`${p}MB`,f=(p,w,q)=>{const U=t("div",{className:"stat"});return U.appendChild(t("div",{className:"stat-value",textContent:p})),U.appendChild(t("div",{className:"stat-label",textContent:w})),q&&U.appendChild(t("div",{className:"stat-desc",textContent:q})),U};L(x,f(o(n),"Memory",`min: ${o(a)}`),f(C.disk_recommended,"Disk",`min: ${C.disk_min}`),f(String(C.cores),C.cores===1?"Core":"Cores"))}const s=document.getElementById("detail-ports-section"),i=document.getElementById("detail-ports"),I=e.ports;if(I?.length&&s&&i){s.classList.remove("hidden");const n=I.map(a=>{const o=t("tr");return o.appendChild(t("td",{className:"font-mono",textContent:String(a.port)})),o.appendChild(t("td",{textContent:a.description})),o});L(i,...n)}else s?.classList.add("hidden");const k=document.getElementById("detail-paths-section"),_=document.getElementById("detail-paths"),$=e.paths;if($?.length&&k&&_){k.classList.remove("hidden");const n=$.map(a=>{const o=t("tr");return o.appendChild(t("td",{className:"font-mono text-xs",textContent:a.path})),o.appendChild(t("td",{textContent:a.description})),o});L(_,...n)}else k?.classList.add("hidden");const T=document.getElementById("detail-user-section"),N=document.getElementById("detail-user"),b=e.user;if(b&&(b.uid||b.gid)&&T&&N){T.classList.remove("hidden");const n=[];if(b.uid){const a=t("tr");a.appendChild(t("td",{textContent:"UID"})),a.appendChild(t("td",{className:"font-mono",textContent:String(b.uid)})),n.push(a)}if(b.gid){const a=t("tr");a.appendChild(t("td",{textContent:"GID"})),a.appendChild(t("td",{className:"font-mono",textContent:String(b.gid)})),n.push(a)}L(N,...n)}else T?.classList.add("hidden");const R=document.getElementById("detail-credentials-section"),V=document.getElementById("detail-credentials"),A=e.credentials;if(A&&R&&V){R.classList.remove("hidden");const n=document.createDocumentFragment();n.appendChild(D("User: ")),n.appendChild(t("code",{textContent:A.username})),n.appendChild(D(" / Pass: ")),n.appendChild(t("code",{textContent:A.password})),A.note&&(n.appendChild(t("br")),n.appendChild(t("span",{className:"text-muted",textContent:A.note}))),L(V,n)}else R?.classList.add("hidden");const j=document.getElementById("detail-faq-section"),G=document.getElementById("detail-faq"),H=e.faq;if(H?.length&&j&&G){j.classList.remove("hidden");const n=()=>{const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("viewBox","0 0 256 256"),o.setAttribute("fill","currentColor");const f=document.createElementNS("http://www.w3.org/2000/svg","path");return f.setAttribute("d","M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"),o.appendChild(f),o},a=H.map((o,f)=>{const p=t("div",{className:`accordion-item${f===0?" open":""}`}),w=t("button",{className:"accordion-header"});w.appendChild(D(o.question)),w.appendChild(n()),w.addEventListener("click",()=>p.classList.toggle("open"));const q=t("div",{className:"accordion-content"});return q.appendChild(t("p",{textContent:o.answer})),p.appendChild(w),p.appendChild(q),p});L(G,...a)}else j?.classList.add("hidden");const M=document.getElementById("detail-changelog-section"),J=document.getElementById("detail-changelog"),O=document.getElementById("changelog-item");if(e.changelog&&M&&J&&O){M.classList.remove("hidden"),O.classList.remove("open");const n=e.changelog,a=X(n),o=t("p"),f=a.split(`
`);f.forEach((p,w)=>{o.appendChild(D(p)),w<f.length-1&&o.appendChild(t("br"))}),L(J,o)}else M?.classList.add("hidden");const Q=document.getElementById("detail-release-section"),W=document.getElementById("detail-release-date"),Z=document.getElementById("detail-github-link");e.release_url||e.release_date?(Q?.classList.remove("hidden"),e.release_date&&W&&(W.textContent=`Released: ${new Date(e.release_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}`),e.release_url&&Z&&(Z.href=e.release_url)):Q?.classList.add("hidden")}function ee(){const e=document.getElementById("search-input"),c=document.getElementById("template-grid"),h=document.getElementById("no-results"),y=c?.querySelectorAll(".app-card"),r=document.querySelectorAll("#category-pills .pill"),E=document.querySelectorAll(".sidebar-nav button[data-category]"),B=document.getElementById("visible-count");if(!c||!y)return;let g="all",m="";P.clear(),y.forEach(s=>{const i=s.getAttribute("data-template");if(i)try{const I=JSON.parse(i);P.set(I.name,I)}catch{}});const S=new URLSearchParams(window.location.search),v=S.get("q")||"",d=S.get("category")||"all";v&&e&&(e.value=v,m=v.toLowerCase()),g=d;function l(){r.forEach(s=>{const i=s.getAttribute("data-category");s.classList.toggle("active",i===g)}),E.forEach(s=>{const i=s.getAttribute("data-category");s.classList.toggle("active",i===g)})}function u(){let s=0;y.forEach(i=>{const I=i.getAttribute("data-name")||"",k=i.getAttribute("data-description")||"",_=i.getAttribute("data-category")||"",N=(!m||I.includes(m)||k.includes(m))&&(g==="all"||_===g);i.style.display=N?"":"none",N&&s++}),B&&(B.textContent=String(s)),h?.classList.toggle("hidden",s>0),c?.classList.toggle("hidden",s===0&&y.length>0)}let x;e?.addEventListener("input",()=>{clearTimeout(x),x=setTimeout(()=>{m=e.value.toLowerCase(),document.getElementById("template-detail")?.classList.contains("hidden")||F(),u();const s=new URL(window.location.href);m?s.searchParams.set("q",e.value):s.searchParams.delete("q"),history.replaceState(null,"",s.toString())},150)});function C(s){g=s,document.getElementById("template-detail")?.classList.contains("hidden")||F(),l(),u();const i=new URL(window.location.href);g!=="all"?i.searchParams.set("category",g):i.searchParams.delete("category"),history.replaceState(null,"",i.toString())}r.forEach(s=>{s.addEventListener("click",()=>{C(s.getAttribute("data-category")||"all")})}),E.forEach(s=>{s.addEventListener("click",()=>{C(s.getAttribute("data-category")||"all"),document.querySelector(".sidebar")?.classList.remove("open"),document.getElementById("sidebar-overlay")?.classList.remove("open")})}),l(),u()}function te(){const c=document.getElementById("template-grid")?.querySelectorAll(".app-card"),h=document.getElementById("back-to-list"),y=document.getElementById("detail-wget-copy"),r=document.getElementById("detail-wget"),E=document.getElementById("detail-sha512-copy");y?.addEventListener("click",async()=>{if(r?.value)try{await navigator.clipboard.writeText(r.value),window.showToast?.("Copied to clipboard!")}catch{r.select(),document.execCommand("copy"),window.showToast?.("Copied!")}}),E?.addEventListener("click",async()=>{const l=document.getElementById("detail-sha512")?.getAttribute("data-sha512");if(l)try{await navigator.clipboard.writeText(l),window.showToast?.("SHA512 copied to clipboard!")}catch{window.showToast?.("Failed to copy")}});const B=document.getElementById("changelog-toggle"),g=document.getElementById("changelog-item");B?.addEventListener("click",()=>{g?.classList.toggle("open")});function m(d){const l=d.getAttribute("data-template");if(l)try{const u=JSON.parse(l);Y(u)}catch{}}c?.forEach(d=>{d.addEventListener("click",()=>m(d)),d.addEventListener("keydown",l=>{const u=l;(u.key==="Enter"||u.key===" ")&&(l.preventDefault(),m(d))})}),h?.addEventListener("click",F),window.addEventListener("popstate",d=>{const l=d.state;if(l?.template){const u=P.get(l.template);u&&(K(u),document.getElementById("template-list")?.classList.add("hidden"),document.getElementById("template-detail")?.classList.remove("hidden"))}else document.getElementById("template-detail")?.classList.add("hidden"),document.getElementById("template-list")?.classList.remove("hidden")});const v=new URLSearchParams(location.search).get("template");if(v){const d=P.get(v);d&&(K(d),document.getElementById("template-list")?.classList.add("hidden"),document.getElementById("template-detail")?.classList.remove("hidden"))}}function ne(){document.addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),document.getElementById("search-input")?.focus())})}function z(){ee(),te(),ne()}z();document.addEventListener("astro:after-swap",z);
