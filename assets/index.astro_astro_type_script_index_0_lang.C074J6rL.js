const P=new Map;function a(e,s){const r=document.createElement(e);return s?.className&&(r.className=s.className),s?.textContent&&(r.textContent=s.textContent),r}function w(e,...s){e.replaceChildren(...s)}function T(e){return document.createTextNode(e)}function Q(e){const s=/^## \[[\d.]+-?\d*\]/m,r=e.split(`
`),p=[];let u=!1;for(const f of r){if(s.test(f)){if(u)break;u=!0}u&&p.push(f)}return p.join(`
`).trim()||e}function G(e){R(e),document.getElementById("template-list")?.classList.add("hidden"),document.getElementById("template-detail")?.classList.remove("hidden");const s=new URL(location.href);s.searchParams.set("template",e.name),s.searchParams.delete("q"),s.searchParams.delete("category"),history.pushState({template:e.name},"",s),window.scrollTo({top:0,behavior:"smooth"})}function $(){document.getElementById("template-detail")?.classList.add("hidden"),document.getElementById("template-list")?.classList.remove("hidden");const e=new URL(location.href);e.searchParams.delete("template"),history.pushState({},"",e)}function R(e){const s=`https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons@main/svg/${e.icon}.svg`,r=e.name.charAt(0).toUpperCase()+e.name.slice(1),p=document.getElementById("detail-icon");p&&(p.src=s);const u=document.getElementById("detail-name");u&&(u.textContent=r);const f=document.getElementById("detail-description");f&&(f.textContent=e.description);const B=document.getElementById("detail-badges");if(B){const n=a("span",{className:"badge badge-success",textContent:`v${e.version}-${e.build_version}`}),m=a("span",{className:"tag",textContent:e.base_os}),o=a("span",{className:"badge badge-info",textContent:e.category});w(B,n,m,o)}const g=document.getElementById("detail-download-section"),h=document.getElementById("detail-wget"),C=document.getElementById("detail-sha512");if(e.download_url){g?.classList.remove("hidden"),h&&(h.value=`wget ${e.download_url}`);const n=document.getElementById("detail-sha512-wrapper");C&&n&&(e.sha512?(C.value=`SHA512: ${e.sha512}`,C.setAttribute("data-sha512",e.sha512),n.classList.remove("hidden")):(C.value="",n.classList.add("hidden")))}else g?.classList.add("hidden");const v=document.getElementById("detail-quickstart-section"),d=document.getElementById("detail-quickstart");if(e.quick_start&&v&&d){v.classList.remove("hidden");const n=a("pre"),m=a("code",{textContent:e.quick_start});n.appendChild(m),w(d,n)}else v?.classList.add("hidden");const i=document.getElementById("detail-resources"),c=e.resources;if(i&&c){const n=c.memory_recommended,m=c.memory_min,o=y=>y>=1024?`${y/1024}GB`:`${y}MB`,E=(y,L,A)=>{const _=a("div",{className:"stat"});return _.appendChild(a("div",{className:"stat-value",textContent:y})),_.appendChild(a("div",{className:"stat-label",textContent:L})),A&&_.appendChild(a("div",{className:"stat-desc",textContent:A})),_};w(i,E(o(n),"Memory",`min: ${o(m)}`),E(c.disk_recommended,"Disk",`min: ${c.disk_min}`),E(String(c.cores),c.cores===1?"Core":"Cores"))}const b=document.getElementById("detail-ports-section"),k=document.getElementById("detail-ports"),t=e.ports;if(t?.length&&b&&k){b.classList.remove("hidden");const n=t.map(m=>{const o=a("tr");return o.appendChild(a("td",{className:"font-mono",textContent:String(m.port)})),o.appendChild(a("td",{textContent:m.description})),o});w(k,...n)}else b?.classList.add("hidden");const l=document.getElementById("detail-paths-section"),I=document.getElementById("detail-paths"),N=e.paths;if(N?.length&&l&&I){l.classList.remove("hidden");const n=N.map(m=>{const o=a("tr");return o.appendChild(a("td",{className:"font-mono text-xs",textContent:m.path})),o.appendChild(a("td",{textContent:m.description})),o});w(I,...n)}else l?.classList.add("hidden");const q=document.getElementById("detail-credentials-section"),D=document.getElementById("detail-credentials"),S=e.credentials;if(S&&q&&D){q.classList.remove("hidden");const n=document.createDocumentFragment();n.appendChild(T("User: ")),n.appendChild(a("code",{textContent:S.username})),n.appendChild(T(" / Pass: ")),n.appendChild(a("code",{textContent:S.password})),S.note&&(n.appendChild(a("br")),n.appendChild(a("span",{className:"text-muted",textContent:S.note}))),w(D,n)}else q?.classList.add("hidden");const x=document.getElementById("detail-faq-section"),M=document.getElementById("detail-faq"),F=e.faq;if(F?.length&&x&&M){x.classList.remove("hidden");const n=()=>{const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("viewBox","0 0 256 256"),o.setAttribute("fill","currentColor");const E=document.createElementNS("http://www.w3.org/2000/svg","path");return E.setAttribute("d","M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"),o.appendChild(E),o},m=F.map((o,E)=>{const y=a("div",{className:`accordion-item${E===0?" open":""}`}),L=a("button",{className:"accordion-header"});L.appendChild(T(o.question)),L.appendChild(n()),L.addEventListener("click",()=>y.classList.toggle("open"));const A=a("div",{className:"accordion-content"});return A.appendChild(a("p",{textContent:o.answer})),y.appendChild(L),y.appendChild(A),y});w(M,...m)}else x?.classList.add("hidden");const U=document.getElementById("detail-changelog-section"),K=document.getElementById("detail-changelog"),V=document.getElementById("changelog-item");if(e.changelog&&U&&K&&V){U.classList.remove("hidden"),V.classList.remove("open");const n=e.changelog,m=Q(n),o=a("p"),E=m.split(`
`);E.forEach((y,L)=>{o.appendChild(T(y)),L<E.length-1&&o.appendChild(a("br"))}),w(K,o)}else U?.classList.add("hidden");const j=document.getElementById("detail-release-section"),H=document.getElementById("detail-release-date"),J=document.getElementById("detail-github-link");e.release_url||e.release_date?(j?.classList.remove("hidden"),e.release_date&&H&&(H.textContent=`Released: ${new Date(e.release_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}`),e.release_url&&J&&(J.href=e.release_url)):j?.classList.add("hidden")}function W(){const e=document.getElementById("search-input"),s=document.getElementById("template-grid"),r=document.getElementById("no-results"),p=s?.querySelectorAll(".app-card"),u=document.querySelectorAll("#category-pills .pill"),f=document.querySelectorAll(".sidebar-nav button[data-category]"),B=document.getElementById("visible-count");if(!s||!p)return;let g="all",h="";P.clear(),p.forEach(t=>{const l=t.getAttribute("data-template");if(l)try{const I=JSON.parse(l);P.set(I.name,I)}catch{}});const C=new URLSearchParams(window.location.search),v=C.get("q")||"",d=C.get("category")||"all";v&&e&&(e.value=v,h=v.toLowerCase()),g=d;function i(){u.forEach(t=>{const l=t.getAttribute("data-category");t.classList.toggle("active",l===g)}),f.forEach(t=>{const l=t.getAttribute("data-category");t.classList.toggle("active",l===g)})}function c(){let t=0;p.forEach(l=>{const I=l.getAttribute("data-name")||"",N=l.getAttribute("data-description")||"",q=l.getAttribute("data-category")||"",x=(!h||I.includes(h)||N.includes(h))&&(g==="all"||q===g);l.style.display=x?"":"none",x&&t++}),B&&(B.textContent=String(t)),r?.classList.toggle("hidden",t>0),s?.classList.toggle("hidden",t===0&&p.length>0)}let b;e?.addEventListener("input",()=>{clearTimeout(b),b=setTimeout(()=>{h=e.value.toLowerCase(),document.getElementById("template-detail")?.classList.contains("hidden")||$(),c();const t=new URL(window.location.href);h?t.searchParams.set("q",e.value):t.searchParams.delete("q"),history.replaceState(null,"",t.toString())},150)});function k(t){g=t,document.getElementById("template-detail")?.classList.contains("hidden")||$(),i(),c();const l=new URL(window.location.href);g!=="all"?l.searchParams.set("category",g):l.searchParams.delete("category"),history.replaceState(null,"",l.toString())}u.forEach(t=>{t.addEventListener("click",()=>{k(t.getAttribute("data-category")||"all")})}),f.forEach(t=>{t.addEventListener("click",()=>{k(t.getAttribute("data-category")||"all"),document.querySelector(".sidebar")?.classList.remove("open"),document.getElementById("sidebar-overlay")?.classList.remove("open")})}),i(),c()}function Z(){const s=document.getElementById("template-grid")?.querySelectorAll(".app-card"),r=document.getElementById("back-to-list"),p=document.getElementById("detail-wget-copy"),u=document.getElementById("detail-wget"),f=document.getElementById("detail-sha512-copy");p?.addEventListener("click",async()=>{if(u?.value)try{await navigator.clipboard.writeText(u.value),window.showToast?.("Copied to clipboard!")}catch{u.select(),document.execCommand("copy"),window.showToast?.("Copied!")}}),f?.addEventListener("click",async()=>{const i=document.getElementById("detail-sha512")?.getAttribute("data-sha512");if(i)try{await navigator.clipboard.writeText(i),window.showToast?.("SHA512 copied to clipboard!")}catch{window.showToast?.("Failed to copy")}});const B=document.getElementById("changelog-toggle"),g=document.getElementById("changelog-item");B?.addEventListener("click",()=>{g?.classList.toggle("open")});function h(d){const i=d.getAttribute("data-template");if(i)try{const c=JSON.parse(i);G(c)}catch{}}s?.forEach(d=>{d.addEventListener("click",()=>h(d)),d.addEventListener("keydown",i=>{const c=i;(c.key==="Enter"||c.key===" ")&&(i.preventDefault(),h(d))})}),r?.addEventListener("click",$),window.addEventListener("popstate",d=>{const i=d.state;if(i?.template){const c=P.get(i.template);c&&(R(c),document.getElementById("template-list")?.classList.add("hidden"),document.getElementById("template-detail")?.classList.remove("hidden"))}else document.getElementById("template-detail")?.classList.add("hidden"),document.getElementById("template-list")?.classList.remove("hidden")});const v=new URLSearchParams(location.search).get("template");if(v){const d=P.get(v);d&&(R(d),document.getElementById("template-list")?.classList.add("hidden"),document.getElementById("template-detail")?.classList.remove("hidden"))}}function z(){const e=document.getElementById("menu-toggle"),s=document.querySelector(".sidebar"),r=document.getElementById("sidebar-overlay");e?.addEventListener("click",()=>{s?.classList.toggle("open"),r?.classList.toggle("open")}),r?.addEventListener("click",()=>{s?.classList.remove("open"),r?.classList.remove("open")})}function X(){document.addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),document.getElementById("search-input")?.focus())})}function O(){W(),Z(),z(),X()}O();document.addEventListener("astro:after-swap",O);
